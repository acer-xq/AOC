f=a=>(r=[],a=a.map(x=>x.split` -> `.map(y=>y.split`,`)).filter(x=>x[0][0]==x[1][0]||x[0][1]==x[1][1]).map(x=>{for(b=[Math.sign((z=x[1])[0]-(y=x[0])[0]),Math.sign(z[1]-y[1])],c=d=i=0;''+[c,d]!=''+z;(r[c=i*b[0]- -y[0]]=r[c]||[])[d=i++*b[1]- -y[1]]=-~r[c][d]);}),r.flat().filter(x=>x>1).length)
console.log(f(require('fs').readFileSync('./test.txt', 'utf8').split('\r\n')))